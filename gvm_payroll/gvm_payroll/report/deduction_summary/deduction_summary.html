<div class="container" style="font-size: 11px; color: #111; padding: 10px;">
	<style>
		.deduction-summary-table th,
		.deduction-summary-table td {
			padding: 6px 10px;
			vertical-align: middle;
			border: 1px solid #000;
			font-size: 11px;
		}
		.deduction-summary-table th {
			background: #f3f4f6;
			font-weight: 700;
			text-align: center;
		}
		.deduction-summary-table td.text-right {
			text-align: right;
		}
		.deduction-summary-table tfoot td {
			font-weight: 700;
			background: #fdf6d5;
		}
	</style>

	<div style="border: 1px solid #000; padding: 10px 12px; margin-bottom: 8px; text-align: center;">
		<div style="text-transform: uppercase; font-size: 18px; font-weight: 700;">
			{{ filters.company || __("Company") }}
		</div>
	</div>
	<div style="text-align: left; font-size: 13px; margin-bottom: 4px; font-weight: 500;">
		{{ __("IT Deduction for the month of") }}:
		{% if (filters.from_date && filters.to_date) { %}
			{{ frappe.datetime.str_to_user(filters.from_date) }} - {{ frappe.datetime.str_to_user(filters.to_date) }}
		{% } else { %}
			{{ frappe.datetime.str_to_user(frappe.datetime.get_today()) }}
		{% } %}
	</div>

	{% var visible_columns = []; %}
	{% for (var c = 0; c < columns.length; c++) { %}
		{% var col = columns[c]; %}
		{% if (!col.hidden && col._id !== "_check") { %}
			{% visible_columns.push(col); %}
		{% } %}
	{% } %}

	{% var totals = {}; %}
	{% for (var i = 0; i < visible_columns.length; i++) { %}
		{% var col = visible_columns[i]; %}
		{% if (["Currency", "Float", "Int"].indexOf(col.fieldtype) !== -1) { %}
			{% totals[col.fieldname || col.id] = 0; %}
		{% } %}
	{% } %}

	<table class="table table-bordered deduction-summary-table" style="border: 1px solid #000;">
		<thead>
			<tr>
				<th style="width: 40px;">{{ __("SL") }}</th>
				{% for (var i = 1; i < visible_columns.length; i++) { %}
					{% var col = visible_columns[i]; %}
					<th>{{ __(col.label || col.name || col.fieldname) }}</th>
				{% } %}
			</tr>
		</thead>
		<tbody>
			{% for (var r = 0; r < data.length; r++) { %}
				{% var row = data[r]; %}
				<tr>
					<td class="text-center">{{ row.idx || (r + 1) }}</td>
					{% for (var i = 1; i < visible_columns.length; i++) { %}
						{% var col = visible_columns[i]; %}
						{% var key = col.fieldname || col.id; %}
						{% var val = row[key]; %}
						{% var is_numeric = ["Currency", "Float", "Int"].indexOf(col.fieldtype) !== -1; %}
						{% if (is_numeric) { %}
							{% totals[key] += (val ? parseFloat(val) : 0); %}
						{% } %}
						<td class="{{ is_numeric ? 'text-right' : '' }}">
							{% if (col.fieldtype === "Currency") { %}
								{{ fmt_money(val || 0, null, 2) }}
							{% } else { %}
								{{ val || "" }}
							{% } %}
						</td>
					{% } %}
				</tr>
			{% } %}
		</tbody>
		{% if (data.length) { %}
		<tfoot>
			<tr>
				<td class="text-right">{{ __("Total Rs.") }}</td>
				{% for (var i = 1; i < visible_columns.length; i++) { %}
					{% var col = visible_columns[i]; %}
					{% var key = col.fieldname || col.id; %}
					{% var is_numeric = ["Currency", "Float", "Int"].indexOf(col.fieldtype) !== -1; %}
					<td class="{{ is_numeric ? 'text-right' : '' }}">
						{% if (is_numeric) { %}
							{% if (col.fieldtype === "Currency") { %}
								{{ fmt_money(totals[key] || 0, null, 2) }}
							{% } else { %}
								{{ totals[key] || 0 }}
							{% } %}
						{% } else { %}
							&nbsp;
						{% } %}
					</td>
				{% } %}
			</tr>
		</tfoot>
		{% } %}
	</table>
</div>

