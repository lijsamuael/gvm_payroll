{% if (data && data.length > 0) { %}
	{% var first_row = data[0]; %}
	{% var meta = first_row._meta || {}; %}
	{% var total_basic = meta.total_basic || 0; %}
	{% var total_esi_employee = meta.total_esi_employee || 0; %}
	{% var total_esi_employer = meta.total_esi_employer || 0; %}
	{% var total_all = meta.total_all || 0; %}
	{% var employee_count = meta.employee_count || 0; %}
	{% var company = meta.company || ""; %}
	{% var month = meta.month || ""; %}
	{% var year = meta.year || ""; %}

	{% var company_name = company || ""; %}
	{% var company_address = ""; %}

	{% var period = (month && year) ? (month + " " + year) : ""; %}

	<style>
		.esi-report {
			font-family: Arial, sans-serif;
			font-size: 12px;
			color: #000;
			padding-left: 5px;
			padding-right: 5px;
		}
		.header-section {
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 20px;
			margin-bottom: 20px;
		}
		.logo-container {
			flex: 0 0 auto;
		}
		.logo-container img {
			max-height: 60px;
			max-width: 180px;
		}
		.company-info {
			flex: 1 1 auto;
			text-align: center;
		}
		.company-name {
			font-size: 18px;
			font-weight: bold;
			color: #003399;
			text-transform: uppercase;
			margin-bottom: 4px;
		}
		.company-address {
			font-size: 12px;
			color: #003399;
			margin-top: 2px;
		}
		.report-title-section {
			border-top: 2px solid #000;
			border-bottom: 2px solid #000;
			padding: 10px 0;
			margin: 20px 0;
		}
		.report-title {
			text-align: center;
			font-size: 16px;
			font-weight: bold;
			color: #003399;
			text-transform: uppercase;
		}
		.period-info {
			text-align: left;
			font-size: 12px;
			color: #003399;
			margin-top: 10px;
		}
		.esi-table {
			width: 100%;
			border-collapse: collapse;
			margin-top: 20px;
			table-layout: fixed;
		}
		.esi-table th,
		.esi-table td {
			border: 1px solid #000;
			padding: 0px 1px;
			text-align: center;
		}
		.esi-table th:nth-child(5),
		.esi-table td:nth-child(5) {
			width: 90px;
		}
		.esi-table th:nth-child(6),
		.esi-table td:nth-child(6) {
			width: 90px;
		}
		.esi-table th {
			background-color: #f0f0f0;
			font-weight: bold;
		}
		.esi-table td.text-left {
			text-align: left;
		}
		.currency-value {
			display: inline-block;
			white-space: nowrap !important;
			word-break: keep-all;
			overflow: hidden;
			text-overflow: ellipsis;
		}
		.esi-table td.text-right {
			text-align: right;
			white-space: nowrap !important;
			padding: 0px 1px;
			word-break: keep-all;
			overflow: hidden;
			line-height: 1.1;
			font-size: 11px;
		}
		.esi-table th:nth-child(5),
		.esi-table th:nth-child(6) {
			font-size: 10px;
			padding: 2px 1px;
		}
		.total-row {
			font-weight: bold;
			background-color: #f9f9f9;
		}
		.total-row td:first-child {
			text-align: left;
		}
		.total-row td.text-right {
			text-align: right;
			white-space: nowrap !important;
			padding: 0px 1px;
			word-break: keep-all;
			overflow: hidden;
			line-height: 1.1;
			font-size: 11px;
		}
	</style>

	<div class="esi-report">
		<div class="header-section">
			<div class="company-info">
				<div class="company-name">{{ company_name }}</div>
				{% if (company_address) { %}
					<div class="company-address">{{ company_address }}</div>
				{% } %}
			</div>
		</div>

		<div class="report-title-section">
			<div class="report-title">ESI Report</div>
		</div>

		<div class="period-info">
			<strong>Year and Month :</strong> {{ period }}
		</div>

		<table class="esi-table">
			<thead>
				<tr>
					<th>SL</th>
					<th>Emp. ID</th>
					<th>Emp. Name</th>
					<th>BASIC</th>
					<th style="width: 90px; font-size: 10px;">Employee Contribution</th>
					<th style="width: 90px; font-size: 10px;">Employer Contribution</th>
					<th>Total</th>
				</tr>
			</thead>
			<tbody>
				{% for (var i = 0; i < data.length; i++) { %}
					{% var row = data[i]; %}
					<tr>
						<td>{{ (i + 1) }}</td>
						<td>{{ row.employee }}</td>
						<td class="text-left">{{ row.employee_name }}</td>
						<td class="text-right"><span class="currency-value">{{ fmt_money(row.basic_salary || 0, null, 2) }}</span></td>
						<td class="text-right"><span class="currency-value">{{ fmt_money(row.esi_employee_contribution || 0, null, 2) }}</span></td>
						<td class="text-right"><span class="currency-value">{{ fmt_money(row.esi_employer_contribution || 0, null, 2) }}</span></td>
						<td class="text-right"><span class="currency-value">{{ fmt_money(row.total || 0, null, 2) }}</span></td>
					</tr>
				{% } %}
				<tr class="total-row">
					<td colspan="3">Total No of Employees: {{ employee_count }}</td>
					<td class="text-right"><span class="currency-value">{{ fmt_money(total_basic, null, 2) }}</span></td>
					<td class="text-right"><span class="currency-value">{{ fmt_money(total_esi_employee, null, 2) }}</span></td>
					<td class="text-right"><span class="currency-value">{{ fmt_money(total_esi_employer, null, 2) }}</span></td>
					<td class="text-right"><span class="currency-value">{{ fmt_money(total_all, null, 2) }}</span></td>
				</tr>
			</tbody>
		</table>
	</div>
{% } else { %}
	<div>No data available</div>
{% } %}
